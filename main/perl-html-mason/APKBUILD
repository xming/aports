# Automatically generated by apkbuild-cpan, template 1
# Contributor: Timo Teräs <timo.teras@iki.fi>
# Maintainer: Timo Teräs <timo.teras@iki.fi>
pkgname=perl-html-mason
_pkgreal=HTML-Mason
pkgver=1.54
pkgrel=0
pkgdesc="High-performance, dynamic web site authoring system"
url="http://search.cpan.org/dist/HTML-Mason/"
arch="noarch"
license="GPL PerlArtistic"
cpandepends="perl-exception-class perl-cache-cache perl-log-any perl-html-parser
	perl-params-validate perl-class-container perl-cgi"
cpanmakedepends="  perl-test-deep "
depends="$cpandepends"
makedepends="perl-dev $cpanmakedepends"
subpackages="$pkgname-doc"
source="http://search.cpan.org/CPAN/authors/id/J/JS/JSWARTZ/$_pkgreal-$pkgver.tar.gz"

_builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	cd "$_builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
}

build() {
	cd "$_builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	make && make test
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" install || return 1
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

md5sums="6240ce4b472f0c92569f9535fcec410f  HTML-Mason-1.54.tar.gz"
sha256sums="a7657205a16e17049da9c9e0f8fac4a3c5fef23965e635372cbff6f2b8452219  HTML-Mason-1.54.tar.gz"
sha512sums="341548326391331b22d4adb60363b63149d13406bfe79683f5f69965811e9b6e43e36336b3503eca42792e70db589b264c093074635ea01860598cd90c6e1dc6  HTML-Mason-1.54.tar.gz"
